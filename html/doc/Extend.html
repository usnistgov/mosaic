<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>9. Extend MOSAIC &#8212; MOSAIC v2.2 documentation</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../_static/style.css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="10. Publication Quality Figures" href="PublicationFigures.html" />
    <link rel="prev" title="8. Scripting and Advanced Features" href="ScriptingandAdvancedFeatures.html" />

<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="../_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="../_static/bootstrap-3.3.7/js/bootstrap.min.js "></script>
<script type="text/javascript" src="../_static/bootstrap-sphinx.js "></script>

	<script async type="text/javascript" id="_fed_an_ua_tag" src="https://dap.digitalgov.gov/Universal-Federated-Analytics-Min.js?agency=DOC&subagency=NIST&pua=UA-66610693-1&yt=true&exts=ppsx,pps,f90,sch,rtf,wrl,txz,m1v,xlsm,msi,xsd,f,tif,eps,mpg,xml,pl,xlt,c"></script>	

	<meta name="theme-color" content="#283593">

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html"><span><img src="../_static/icon_48.png"></span>
           </a>
        <span class="navbar-text navbar-version pull-left"><b>v2.2</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="../../latex/MOSAIC.pdf">Download PDF</a></li>
                <li><a href="mailingList.html">Mailing List</a></li>
                <li><a href="//github.com/usnistgov/mosaic">Develop</a></li>
                <li><a href="//github.com/usnistgov/mosaic/issues">Issue Tracker</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Contents <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Introduction.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="Algorithms.html">2. Data Processing Algorithms in <em>MOSAIC</em></a></li>
<li class="toctree-l1"><a class="reference internal" href="GettingStarted.html">3. Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="GraphicalInterface.html">4. <em>MOSAIC</em> GUI</a></li>
<li class="toctree-l1"><a class="reference internal" href="WebInterface.html">5. <em>MOSAIC</em> WEB</a></li>
<li class="toctree-l1"><a class="reference internal" href="settingsFile.html">6. Settings File</a></li>
<li class="toctree-l1"><a class="reference internal" href="DatabaseStructure.html">7. Database Structure and Query Syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="ScriptingandAdvancedFeatures.html">8. Scripting and Advanced Features</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">9. Extend <em>MOSAIC</em></a></li>
<li class="toctree-l1"><a class="reference internal" href="PublicationFigures.html">10. Publication Quality Figures</a></li>
<li class="toctree-l1"><a class="reference internal" href="AdvancedAnalysis.html">11. Advanced Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="Addons.html">12. Addons</a></li>
<li class="toctree-l1"><a class="reference internal" href="DeveloperTools.html">13. Developer Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="apidocs.html">14. API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="References.html">15. Bibliography</a></li>
</ul>
</ul>
</li>
              
            
            
            
            
            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <section id="extend-projname">
<span id="extend-page"></span><h1><span class="section-number">9. </span>Extend <em>MOSAIC</em><a class="headerlink" href="#extend-projname" title="Permalink to this headline">¶</a></h1>
<p><em>MOSAIC</em> was designed from the start using object oriented tools, which makes it easy to extend. <a class="reference internal" href="../api-doc/mosaic.meta.html#api-metaclass-page"><span class="std std-ref">Meta-Classes</span></a> define interfaces to five key parts of <em>MOSAIC</em>: time-series IO (<code class="xref py py-class docutils literal notranslate"><span class="pre">metaTrajIO</span></code>), time-series filtering (<code class="xref py py-class docutils literal notranslate"><span class="pre">metaIOFilter</span></code>), analysis output (<code class="xref py py-class docutils literal notranslate"><span class="pre">metaMDIO</span></code>), event partition and segmenting (<code class="xref py py-class docutils literal notranslate"><span class="pre">metaEventPartition</span></code>), and event processing (<code class="xref py py-class docutils literal notranslate"><span class="pre">metaEventProcessor</span></code>). Sub-classing any of these meta classes and implementing their  interface functions allows one to extend <em>MOSAIC</em> while maintaining compatibility with other parts of the program. We highlight these capabilities via two examples. In the first example, we show how one can extend <code class="xref py py-class docutils literal notranslate"><span class="pre">metaTrajIO</span></code> to read arbitrary binary files. In the second example, we implement a new top-level class that converts files to the comma separated value (CSV) format.</p>
<section id="read-arbitrary-binary-data-files">
<h2><span class="section-number">9.1. </span>Read Arbitrary Binary Data Files<a class="headerlink" href="#read-arbitrary-binary-data-files" title="Permalink to this headline">¶</a></h2>
<p>In this first example, we implement a class that can read an arbitrary binary data file and make its data available via the interface functions in <code class="xref py py-class docutils literal notranslate"><span class="pre">metaTrajIO</span></code>. This allows the newly implemented binary data to be used across <em>MOSAIC</em>. A complete listing of the code used in this example (<code class="xref py py-class docutils literal notranslate"><span class="pre">binTrajIO</span></code>) is available in the API documentation.</p>
<p>The new binary IO class is implemented by sub-classing <code class="xref py py-class docutils literal notranslate"><span class="pre">metaTrajIO</span></code> as shown in the listing below.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">binTrajIO</span><span class="p">(</span><span class="n">metaTrajIO</span><span class="o">.</span><span class="n">metaTrajIO</span><span class="p">):</span>
</pre></div>
</div>
<p>Next, we must fully implement the <code class="xref py py-class docutils literal notranslate"><span class="pre">metaTrajIO</span></code> interface functions (<code class="xref py py-meth docutils literal notranslate"><span class="pre">_init()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">readdata()</span></code> and <code class="xref py py-meth docutils literal notranslate"><span class="pre">_formatsettings()</span></code>). Note that the arguments of each function must match their corresponding base-class versions. For example the <code class="xref py py-meth docutils literal notranslate"><span class="pre">_init()</span></code> function only accepts keyword arguments and is defined as shown below.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">_init</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</pre></div>
</div>
<p>The <code class="xref py py-meth docutils literal notranslate"><span class="pre">_init()</span></code> function checks the arguments passed to <em>kwargs</em> and raises an exception if they are not defined.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;SamplingFrequency&#39;</span><span class="p">):</span>
<span class="hll">                <span class="k">raise</span> <span class="n">metaTrajIO</span><span class="o">.</span><span class="n">InsufficientArgumentsError</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{0}</span><span class="s2"> requires the sampling rate in Hz to be defined.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="p">))</span>
</span>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;PythonStructCode&#39;</span><span class="p">):</span>
<span class="hll">                <span class="k">raise</span> <span class="n">metaTrajIO</span><span class="o">.</span><span class="n">InsufficientArgumentsError</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{0}</span><span class="s2"> requires the Python struct code to be defined.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="p">))</span>
</span></pre></div>
</div>
<p>Next we define the <code class="xref py py-meth docutils literal notranslate"><span class="pre">readdata()</span></code> function that reads in the data and stores the results in a numpy array. This array is then passed back to the calling function.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>     <span class="k">def</span> <span class="nf">readdata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fname</span><span class="p">):</span>

             <span class="n">tempdata</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([])</span>
             <span class="c1"># Read binary data and add it to the data pipe</span>
             <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">fname</span><span class="p">:</span>
<span class="hll">                     <span class="n">tempdata</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span> <span class="n">tempdata</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">readBinaryFile</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="p">))</span>
</span>
             <span class="k">return</span> <span class="n">tempdata</span>
</pre></div>
</div>
<p>Finally, we implement the <code class="xref py py-meth docutils literal notranslate"><span class="pre">_formatsettings()</span></code> that returns a formatted string of the settings used to read in binary data.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">_formatsettings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">                Return a formatted string of settings for display</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">fmtstr</span><span class="o">=</span><span class="s2">&quot;&quot;</span>

        <span class="n">fmtstr</span><span class="o">+=</span><span class="s1">&#39;</span><span class="se">\n\t\t</span><span class="s1">Amplifier scale = </span><span class="si">{0}</span><span class="s1"> pA</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">AmplifierScale</span><span class="p">)</span>
        <span class="n">fmtstr</span><span class="o">+=</span><span class="s1">&#39;</span><span class="se">\t\t</span><span class="s1">Amplifier offset = </span><span class="si">{0}</span><span class="s1"> pA</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">AmplifierOffset</span><span class="p">)</span>
        <span class="n">fmtstr</span><span class="o">+=</span><span class="s1">&#39;</span><span class="se">\t\t</span><span class="s1">Header offset = </span><span class="si">{0}</span><span class="s1"> bytes</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">HeaderOffset</span><span class="p">)</span>
        <span class="n">fmtstr</span><span class="o">+=</span><span class="s1">&#39;</span><span class="se">\t\t</span><span class="s1">Data type code = </span><span class="se">\&#39;</span><span class="si">{0}</span><span class="se">\&#39;\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">PythonStructCode</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">fmtstr</span>
</pre></div>
</div>
<p>The newly defined <code class="xref py py-class docutils literal notranslate"><span class="pre">binTrajIO</span></code> class can then be used as shown below and in <a class="reference internal" href="ScriptingandAdvancedFeatures.html#scripting-page"><span class="std std-ref">Scripting and Advanced Features</span></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Process all binary files in a directory</span>
<span class="n">mosaic</span><span class="o">.</span><span class="n">SingleChannelAnalysis</span><span class="o">.</span><span class="n">SingleChannelAnalysis</span><span class="p">(</span>
            <span class="s2">&quot;~/RefData/binSet1/&quot;</span><span class="p">,</span>
            <span class="nb">bin</span><span class="o">.</span><span class="n">binTrajIO</span><span class="p">,</span>
            <span class="kc">None</span><span class="p">,</span>
            <span class="n">es</span><span class="o">.</span><span class="n">eventSegment</span><span class="p">,</span>
            <span class="n">mosaic</span><span class="o">.</span><span class="n">adept2State</span><span class="o">.</span><span class="n">adept2State</span>
        <span class="p">)</span><span class="o">.</span><span class="n">Run</span><span class="p">()</span>
</pre></div>
</div>
<p>Similar to other <cite>TrajIO</cite> objects, parameters for <code class="xref py py-class docutils literal notranslate"><span class="pre">binTrajIO</span></code> are obtained from the settings file when used with <code class="xref py py-class docutils literal notranslate"><span class="pre">SingleChannelAnalysis</span></code>. Example settings for <code class="xref py py-class docutils literal notranslate"><span class="pre">binTrajIO</span></code> that read 16-bit intgers from a binary data file, assuming 50 <cite>kHz</cite> sampling, are shown below.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;binTrajIO&quot;</span> <span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;filter&quot;</span>                <span class="o">:</span> <span class="s2">&quot;*bin&quot;</span><span class="p">,</span>
        <span class="s2">&quot;AmplifierScale&quot;</span>        <span class="o">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
        <span class="s2">&quot;AmplifierOffset&quot;</span>       <span class="o">:</span> <span class="s2">&quot;0.0&quot;</span><span class="p">,</span>
        <span class="s2">&quot;SamplingFrequency&quot;</span>     <span class="o">:</span> <span class="s2">&quot;50000&quot;</span><span class="p">,</span>
        <span class="s2">&quot;HeaderOffset&quot;</span>          <span class="o">:</span> <span class="s2">&quot;0&quot;</span><span class="p">,</span>
        <span class="s2">&quot;PythonStructCode&quot;</span>      <span class="o">:</span> <span class="s2">&quot;&#39;h&#39;&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="define-top-level-functionality">
<h2><span class="section-number">9.2. </span>Define Top-Level Functionality<a class="headerlink" href="#define-top-level-functionality" title="Permalink to this headline">¶</a></h2>
<p>New functionality can be added to <em>MOSAIC</em> by combining other parts of the code. One way of accomplishing this is by defining new top-level functionality as shown in the following example. We define a new class that converts data from one of the supported data formats to comma separated text files (CSV). A complete listing of the <code class="xref py py-class docutils literal notranslate"><span class="pre">ConvertToCSV</span></code> class in this example is available in the API documentation.</p>
<p>The <em>__init__</em> function of <code class="xref py py-class docutils literal notranslate"><span class="pre">ConvertToCSV</span></code> class accepts two arguments: a trajIO object and the location to save the converted files. If the output directory is not specified, the data is saved in the same folder as the input data. The data conversion is performed by the <code class="xref py py-meth docutils literal notranslate"><span class="pre">Convert()</span></code> function, which saves the data in blocks controlled by the <em>blockSize</em> parameter. <code class="xref py py-meth docutils literal notranslate"><span class="pre">Convert()</span></code> saves each block to a new CSV file, named with the filename of the input data followed by an integer number (see the API documentation for <code class="xref py py-meth docutils literal notranslate"><span class="pre">_filename()</span></code> for additional details).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ConvertToCSV</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
        <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">trajDataObj</span><span class="p">,</span> <span class="n">outdir</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">trajDataObj</span><span class="o">=</span><span class="n">trajDataObj</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">datPath</span><span class="o">=</span><span class="n">trajDataObj</span><span class="o">.</span><span class="n">datPath</span>

                <span class="c1"># If outdir is None, save the CSV files to the same directory as the data.</span>
                <span class="k">if</span> <span class="n">outdir</span><span class="o">==</span><span class="kc">None</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">outDir</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">datPath</span>
                <span class="k">else</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">outDir</span><span class="o">=</span><span class="n">outdir</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">filePrefix</span><span class="o">=</span><span class="kc">None</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_creategenerator</span><span class="p">()</span>

        <span class="k">def</span> <span class="nf">Convert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">blockSize</span><span class="p">):</span>
                <span class="n">data</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">float64</span><span class="p">)</span>

                <span class="k">try</span><span class="p">:</span>
                        <span class="k">while</span><span class="p">(</span><span class="kc">True</span><span class="p">):</span>
                                <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">trajDataObj</span><span class="o">.</span><span class="n">popdata</span><span class="p">(</span><span class="n">blockSize</span><span class="p">))</span><span class="o">.</span><span class="n">tofile</span><span class="p">(</span>
<span class="hll">                                                <span class="bp">self</span><span class="o">.</span><span class="n">_filename</span><span class="p">(),</span>
</span>                                                <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;,&#39;</span>
                                        <span class="p">)</span>
<span class="hll">                <span class="k">except</span> <span class="n">EmptyDataPipeError</span><span class="p">:</span>
</span>                        <span class="k">pass</span>
</pre></div>
</div>
<p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">ConvertToCSV</span></code> class can now be used with any trajIO object as seen below.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ConvertToCSV</span><span class="p">(</span> <span class="n">abfTrajIO</span><span class="p">(</span><span class="n">dirname</span><span class="o">=</span><span class="s2">&quot;~/RefData/abfSet1/&quot;</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="s2">&quot;*abf&quot;</span><span class="p">)</span> <span class="p">)</span><span class="o">.</span><span class="n">Convert</span><span class="p">(</span>
<span class="hll">                        <span class="n">blockSize</span><span class="o">=</span><span class="mi">50000</span><span class="p">)</span>
</span>
<span class="n">ConvertToCSV</span><span class="p">(</span> <span class="n">qdfTrajIO</span><span class="p">(</span><span class="n">dirname</span><span class="o">=</span><span class="s2">&quot;~/RefData/qdfSet1/&quot;</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="s2">&quot;*qdf&quot;</span><span class="p">,</span> <span class="n">Rfb</span><span class="o">=</span><span class="s2">&quot;2.1E+9&quot;</span><span class="p">,</span>
                        <span class="n">Cfb</span><span class="o">=</span><span class="s2">&quot;1.16E-12&quot;</span><span class="p">)</span> <span class="p">)</span><span class="o">.</span><span class="n">Convert</span><span class="p">(</span><span class="n">blockSize</span><span class="o">=</span><span class="mi">50000</span><span class="p">)</span>

<span class="n">ConvertToCSV</span><span class="p">(</span> <span class="n">binTrajIO</span><span class="p">(</span><span class="n">dirname</span><span class="o">=</span><span class="s2">&quot;~/RefData/binSet1/&quot;</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="s2">&quot;*bin&quot;</span><span class="p">,</span> <span class="n">AmplifierScale</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
                        <span class="n">AmplifierOffset</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">SamplingFrequency</span><span class="o">=</span><span class="mi">50000</span><span class="p">,</span> <span class="n">HeaderOffset</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                        <span class="n">PythonStructCode</span><span class="o">=</span><span class="s1">&#39;h&#39;</span><span class="p">)</span> <span class="p">)</span><span class="o">.</span><span class="n">Convert</span><span class="p">(</span><span class="n">blockSize</span><span class="o">=</span><span class="mi">50000</span><span class="p">)</span>
</pre></div>
</div>
<p>Since <code class="xref py py-class docutils literal notranslate"><span class="pre">ConvertToCSV</span></code> accepts a trajIO object, we can apply a lowpass filter to the data before converting it to the CSV format. This is accomplished by passing the <em>datafilter</em> option to the trajIO object as described in the <a class="reference internal" href="ScriptingandAdvancedFeatures.html#scripting-filter-sec"><span class="std std-ref">Filter Data</span></a> section. In the example below, we convert ABF files to the CSV format after applying a lowpass Bessel filter to the data.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ConvertToCSV</span><span class="p">(</span> <span class="n">abfTrajIO</span><span class="p">(</span><span class="n">dirname</span><span class="o">=</span><span class="s2">&quot;~/RefData/abfSet1/&quot;</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="s2">&quot;*abf&quot;</span><span class="p">,</span>
<span class="hll">                <span class="n">datafilter</span><span class="o">=</span><span class="n">mosaic</span><span class="o">.</span><span class="n">besselFilter</span>
</span>        <span class="p">)</span> <span class="p">)</span><span class="o">.</span><span class="n">Convert</span><span class="p">(</span><span class="n">blockSize</span><span class="o">=</span><span class="mi">50000</span><span class="p">)</span>
</pre></div>
</div>
<p>Finally, the <code class="xref py py-class docutils literal notranslate"><span class="pre">ConvertToCSV</span></code> class can be further extended to output arbitrary binary files in place of CSV by the simple extension shown below.</p>
<script src="https://gist.github.com/abalijepalli/975148996058ee10d4d7.js">&nbsp;</script></section>
</section>


    </div>
      
  </div>
</div>
<!-- 
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.5.4.<br/>
    </p>
  </div>
</footer> -->
<script type="text/javascript"
	src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<div class="footer" style="vertical-align: center" align="center">
		<table width="90%" style="vertical-align: center">
			<col width=40%>
			<col width=60%>
			<tr>
				<td align="left">
					<a href="Developers.html"><small><em>MOSAIC Developers</em></small></a> |
					<a href="https://www.nist.gov/people/arvind-balijepalli"><small><em>Contact</em></small></a> |
					<a href="Disclaimer.html"><small><em>Terms of Use</em></small></a>
				</td>
			<!-- </tr>
			<tr> -->
				<td align="right">
					<a target="_blank" href="http://www.nist.gov/public_affairs/privacy.cfm#privpolicy"><small>Privacy Policy</small></a> |
					<a target="_blank" href="http://www.nist.gov/public_affairs/privacy.cfm#secnot"><small>Security Notice</small></a> |
					<a href="http://www.nist.gov/public_affairs/privacy.cfm#accesstate"><small>Accessibility Statement</small></a> |
					<a target="_blank" href="mailto:data@nist.gov?subject=Feedback%20on%20Web%20Site%20Template"><small>Send feedback</small></a>
					<br/>
				</td>
			</tr>
		</table>

		<br />
		<a href="http://www.nist.gov/"><small><em>National Institute of Standards and Technology</em></small></a>
		<!-- <a href="http://www.nist.gov"><img src="_static/nist_logo.png" width="30%" alt="National Institute of Standards and Technology"></a> -->

</div>

  </body>
</html>